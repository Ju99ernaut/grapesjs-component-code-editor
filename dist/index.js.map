{"version":3,"file":"index.js","mappings":"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","sources":["webpack://grapesjs-component-code-editor/webpack/universalModuleDefinition","webpack://grapesjs-component-code-editor/webpack/bootstrap","webpack://grapesjs-component-code-editor/webpack/runtime/define property getters","webpack://grapesjs-component-code-editor/webpack/runtime/hasOwnProperty shorthand","webpack://grapesjs-component-code-editor/webpack/runtime/make namespace object","webpack://grapesjs-component-code-editor/./node_modules/.pnpm/split.js@1.6.5/node_modules/split.js/dist/split.es.js","webpack://grapesjs-component-code-editor/./src/code-editor/index.ts","webpack://grapesjs-component-code-editor/./src/consts.ts","webpack://grapesjs-component-code-editor/./src/index.ts","webpack://grapesjs-component-code-editor/./src/commands.ts"],"sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"grapesjs-component-code-editor\"] = factory();\n\telse\n\t\troot[\"grapesjs-component-code-editor\"] = factory();\n})(typeof globalThis !== 'undefined' ? globalThis : (typeof window !== 'undefined' ? window : this), () => {\nreturn ","// The require scope\nvar __webpack_require__ = {};\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// The programming goals of Split.js are to deliver readable, understandable and\n// maintainable code, while at the same time manually optimizing for tiny minified file size,\n// browser compatibility without additional requirements\n// and very few assumptions about the user's page layout.\nvar global = typeof window !== 'undefined' ? window : null;\nvar ssr = global === null;\nvar document = !ssr ? global.document : undefined;\n\n// Save a couple long function names that are used frequently.\n// This optimization saves around 400 bytes.\nvar addEventListener = 'addEventListener';\nvar removeEventListener = 'removeEventListener';\nvar getBoundingClientRect = 'getBoundingClientRect';\nvar gutterStartDragging = '_a';\nvar aGutterSize = '_b';\nvar bGutterSize = '_c';\nvar HORIZONTAL = 'horizontal';\nvar NOOP = function () { return false; };\n\n// Helper function determines which prefixes of CSS calc we need.\n// We only need to do this once on startup, when this anonymous function is called.\n//\n// Tests -webkit, -moz and -o prefixes. Modified from StackOverflow:\n// http://stackoverflow.com/questions/16625140/js-feature-detection-to-detect-the-usage-of-webkit-calc-over-calc/16625167#16625167\nvar calc = ssr\n    ? 'calc'\n    : ((['', '-webkit-', '-moz-', '-o-']\n          .filter(function (prefix) {\n              var el = document.createElement('div');\n              el.style.cssText = \"width:\" + prefix + \"calc(9px)\";\n\n              return !!el.style.length\n          })\n          .shift()) + \"calc\");\n\n// Helper function checks if its argument is a string-like type\nvar isString = function (v) { return typeof v === 'string' || v instanceof String; };\n\n// Helper function allows elements and string selectors to be used\n// interchangeably. In either case an element is returned. This allows us to\n// do `Split([elem1, elem2])` as well as `Split(['#id1', '#id2'])`.\nvar elementOrSelector = function (el) {\n    if (isString(el)) {\n        var ele = document.querySelector(el);\n        if (!ele) {\n            throw new Error((\"Selector \" + el + \" did not match a DOM element\"))\n        }\n        return ele\n    }\n\n    return el\n};\n\n// Helper function gets a property from the properties object, with a default fallback\nvar getOption = function (options, propName, def) {\n    var value = options[propName];\n    if (value !== undefined) {\n        return value\n    }\n    return def\n};\n\nvar getGutterSize = function (gutterSize, isFirst, isLast, gutterAlign) {\n    if (isFirst) {\n        if (gutterAlign === 'end') {\n            return 0\n        }\n        if (gutterAlign === 'center') {\n            return gutterSize / 2\n        }\n    } else if (isLast) {\n        if (gutterAlign === 'start') {\n            return 0\n        }\n        if (gutterAlign === 'center') {\n            return gutterSize / 2\n        }\n    }\n\n    return gutterSize\n};\n\n// Default options\nvar defaultGutterFn = function (i, gutterDirection) {\n    var gut = document.createElement('div');\n    gut.className = \"gutter gutter-\" + gutterDirection;\n    return gut\n};\n\nvar defaultElementStyleFn = function (dim, size, gutSize) {\n    var style = {};\n\n    if (!isString(size)) {\n        style[dim] = calc + \"(\" + size + \"% - \" + gutSize + \"px)\";\n    } else {\n        style[dim] = size;\n    }\n\n    return style\n};\n\nvar defaultGutterStyleFn = function (dim, gutSize) {\n    var obj;\n\n    return (( obj = {}, obj[dim] = (gutSize + \"px\"), obj ));\n};\n\n// The main function to initialize a split. Split.js thinks about each pair\n// of elements as an independant pair. Dragging the gutter between two elements\n// only changes the dimensions of elements in that pair. This is key to understanding\n// how the following functions operate, since each function is bound to a pair.\n//\n// A pair object is shaped like this:\n//\n// {\n//     a: DOM element,\n//     b: DOM element,\n//     aMin: Number,\n//     bMin: Number,\n//     dragging: Boolean,\n//     parent: DOM element,\n//     direction: 'horizontal' | 'vertical'\n// }\n//\n// The basic sequence:\n//\n// 1. Set defaults to something sane. `options` doesn't have to be passed at all.\n// 2. Initialize a bunch of strings based on the direction we're splitting.\n//    A lot of the behavior in the rest of the library is paramatized down to\n//    rely on CSS strings and classes.\n// 3. Define the dragging helper functions, and a few helpers to go with them.\n// 4. Loop through the elements while pairing them off. Every pair gets an\n//    `pair` object and a gutter.\n// 5. Actually size the pair elements, insert gutters and attach event listeners.\nvar Split = function (idsOption, options) {\n    if ( options === void 0 ) options = {};\n\n    if (ssr) { return {} }\n\n    var ids = idsOption;\n    var dimension;\n    var clientAxis;\n    var position;\n    var positionEnd;\n    var clientSize;\n    var elements;\n\n    // Allow HTMLCollection to be used as an argument when supported\n    if (Array.from) {\n        ids = Array.from(ids);\n    }\n\n    // All DOM elements in the split should have a common parent. We can grab\n    // the first elements parent and hope users read the docs because the\n    // behavior will be whacky otherwise.\n    var firstElement = elementOrSelector(ids[0]);\n    var parent = firstElement.parentNode;\n    var parentStyle = getComputedStyle ? getComputedStyle(parent) : null;\n    var parentFlexDirection = parentStyle ? parentStyle.flexDirection : null;\n\n    // Set default options.sizes to equal percentages of the parent element.\n    var sizes = getOption(options, 'sizes') || ids.map(function () { return 100 / ids.length; });\n\n    // Standardize minSize and maxSize to an array if it isn't already.\n    // This allows minSize and maxSize to be passed as a number.\n    var minSize = getOption(options, 'minSize', 100);\n    var minSizes = Array.isArray(minSize) ? minSize : ids.map(function () { return minSize; });\n    var maxSize = getOption(options, 'maxSize', Infinity);\n    var maxSizes = Array.isArray(maxSize) ? maxSize : ids.map(function () { return maxSize; });\n\n    // Get other options\n    var expandToMin = getOption(options, 'expandToMin', false);\n    var gutterSize = getOption(options, 'gutterSize', 10);\n    var gutterAlign = getOption(options, 'gutterAlign', 'center');\n    var snapOffset = getOption(options, 'snapOffset', 30);\n    var snapOffsets = Array.isArray(snapOffset) ? snapOffset : ids.map(function () { return snapOffset; });\n    var dragInterval = getOption(options, 'dragInterval', 1);\n    var direction = getOption(options, 'direction', HORIZONTAL);\n    var cursor = getOption(\n        options,\n        'cursor',\n        direction === HORIZONTAL ? 'col-resize' : 'row-resize'\n    );\n    var gutter = getOption(options, 'gutter', defaultGutterFn);\n    var elementStyle = getOption(\n        options,\n        'elementStyle',\n        defaultElementStyleFn\n    );\n    var gutterStyle = getOption(options, 'gutterStyle', defaultGutterStyleFn);\n\n    // 2. Initialize a bunch of strings based on the direction we're splitting.\n    // A lot of the behavior in the rest of the library is paramatized down to\n    // rely on CSS strings and classes.\n    if (direction === HORIZONTAL) {\n        dimension = 'width';\n        clientAxis = 'clientX';\n        position = 'left';\n        positionEnd = 'right';\n        clientSize = 'clientWidth';\n    } else if (direction === 'vertical') {\n        dimension = 'height';\n        clientAxis = 'clientY';\n        position = 'top';\n        positionEnd = 'bottom';\n        clientSize = 'clientHeight';\n    }\n\n    // 3. Define the dragging helper functions, and a few helpers to go with them.\n    // Each helper is bound to a pair object that contains its metadata. This\n    // also makes it easy to store references to listeners that that will be\n    // added and removed.\n    //\n    // Even though there are no other functions contained in them, aliasing\n    // this to self saves 50 bytes or so since it's used so frequently.\n    //\n    // The pair object saves metadata like dragging state, position and\n    // event listener references.\n\n    function setElementSize(el, size, gutSize, i) {\n        // Split.js allows setting sizes via numbers (ideally), or if you must,\n        // by string, like '300px'. This is less than ideal, because it breaks\n        // the fluid layout that `calc(% - px)` provides. You're on your own if you do that,\n        // make sure you calculate the gutter size by hand.\n        var style = elementStyle(dimension, size, gutSize, i);\n\n        Object.keys(style).forEach(function (prop) {\n            // eslint-disable-next-line no-param-reassign\n            el.style[prop] = style[prop];\n        });\n    }\n\n    function setGutterSize(gutterElement, gutSize, i) {\n        var style = gutterStyle(dimension, gutSize, i);\n\n        Object.keys(style).forEach(function (prop) {\n            // eslint-disable-next-line no-param-reassign\n            gutterElement.style[prop] = style[prop];\n        });\n    }\n\n    function getSizes() {\n        return elements.map(function (element) { return element.size; })\n    }\n\n    // Supports touch events, but not multitouch, so only the first\n    // finger `touches[0]` is counted.\n    function getMousePosition(e) {\n        if ('touches' in e) { return e.touches[0][clientAxis] }\n        return e[clientAxis]\n    }\n\n    // Actually adjust the size of elements `a` and `b` to `offset` while dragging.\n    // calc is used to allow calc(percentage + gutterpx) on the whole split instance,\n    // which allows the viewport to be resized without additional logic.\n    // Element a's size is the same as offset. b's size is total size - a size.\n    // Both sizes are calculated from the initial parent percentage,\n    // then the gutter size is subtracted.\n    function adjust(offset) {\n        var a = elements[this.a];\n        var b = elements[this.b];\n        var percentage = a.size + b.size;\n\n        a.size = (offset / this.size) * percentage;\n        b.size = percentage - (offset / this.size) * percentage;\n\n        setElementSize(a.element, a.size, this[aGutterSize], a.i);\n        setElementSize(b.element, b.size, this[bGutterSize], b.i);\n    }\n\n    // drag, where all the magic happens. The logic is really quite simple:\n    //\n    // 1. Ignore if the pair is not dragging.\n    // 2. Get the offset of the event.\n    // 3. Snap offset to min if within snappable range (within min + snapOffset).\n    // 4. Actually adjust each element in the pair to offset.\n    //\n    // ---------------------------------------------------------------------\n    // |    | <- a.minSize               ||              b.minSize -> |    |\n    // |    |  | <- this.snapOffset      ||     this.snapOffset -> |  |    |\n    // |    |  |                         ||                        |  |    |\n    // |    |  |                         ||                        |  |    |\n    // ---------------------------------------------------------------------\n    // | <- this.start                                        this.size -> |\n    function drag(e) {\n        var offset;\n        var a = elements[this.a];\n        var b = elements[this.b];\n\n        if (!this.dragging) { return }\n\n        // Get the offset of the event from the first side of the\n        // pair `this.start`. Then offset by the initial position of the\n        // mouse compared to the gutter size.\n        offset =\n            getMousePosition(e) -\n            this.start +\n            (this[aGutterSize] - this.dragOffset);\n\n        if (dragInterval > 1) {\n            offset = Math.round(offset / dragInterval) * dragInterval;\n        }\n\n        // If within snapOffset of min or max, set offset to min or max.\n        // snapOffset buffers a.minSize and b.minSize, so logic is opposite for both.\n        // Include the appropriate gutter sizes to prevent overflows.\n        if (offset <= a.minSize + a.snapOffset + this[aGutterSize]) {\n            offset = a.minSize + this[aGutterSize];\n        } else if (\n            offset >=\n            this.size - (b.minSize + b.snapOffset + this[bGutterSize])\n        ) {\n            offset = this.size - (b.minSize + this[bGutterSize]);\n        }\n\n        if (offset >= a.maxSize - a.snapOffset + this[aGutterSize]) {\n            offset = a.maxSize + this[aGutterSize];\n        } else if (\n            offset <=\n            this.size - (b.maxSize - b.snapOffset + this[bGutterSize])\n        ) {\n            offset = this.size - (b.maxSize + this[bGutterSize]);\n        }\n\n        // Actually adjust the size.\n        adjust.call(this, offset);\n\n        // Call the drag callback continously. Don't do anything too intensive\n        // in this callback.\n        getOption(options, 'onDrag', NOOP)(getSizes());\n    }\n\n    // Cache some important sizes when drag starts, so we don't have to do that\n    // continously:\n    //\n    // `size`: The total size of the pair. First + second + first gutter + second gutter.\n    // `start`: The leading side of the first element.\n    //\n    // ------------------------------------------------\n    // |      aGutterSize -> |||                      |\n    // |                     |||                      |\n    // |                     |||                      |\n    // |                     ||| <- bGutterSize       |\n    // ------------------------------------------------\n    // | <- start                             size -> |\n    function calculateSizes() {\n        // Figure out the parent size minus padding.\n        var a = elements[this.a].element;\n        var b = elements[this.b].element;\n\n        var aBounds = a[getBoundingClientRect]();\n        var bBounds = b[getBoundingClientRect]();\n\n        this.size =\n            aBounds[dimension] +\n            bBounds[dimension] +\n            this[aGutterSize] +\n            this[bGutterSize];\n        this.start = aBounds[position];\n        this.end = aBounds[positionEnd];\n    }\n\n    function innerSize(element) {\n        // Return nothing if getComputedStyle is not supported (< IE9)\n        // Or if parent element has no layout yet\n        if (!getComputedStyle) { return null }\n\n        var computedStyle = getComputedStyle(element);\n\n        if (!computedStyle) { return null }\n\n        var size = element[clientSize];\n\n        if (size === 0) { return null }\n\n        if (direction === HORIZONTAL) {\n            size -=\n                parseFloat(computedStyle.paddingLeft) +\n                parseFloat(computedStyle.paddingRight);\n        } else {\n            size -=\n                parseFloat(computedStyle.paddingTop) +\n                parseFloat(computedStyle.paddingBottom);\n        }\n\n        return size\n    }\n\n    // When specifying percentage sizes that are less than the computed\n    // size of the element minus the gutter, the lesser percentages must be increased\n    // (and decreased from the other elements) to make space for the pixels\n    // subtracted by the gutters.\n    function trimToMin(sizesToTrim) {\n        // Try to get inner size of parent element.\n        // If it's no supported, return original sizes.\n        var parentSize = innerSize(parent);\n        if (parentSize === null) {\n            return sizesToTrim\n        }\n\n        if (minSizes.reduce(function (a, b) { return a + b; }, 0) > parentSize) {\n            return sizesToTrim\n        }\n\n        // Keep track of the excess pixels, the amount of pixels over the desired percentage\n        // Also keep track of the elements with pixels to spare, to decrease after if needed\n        var excessPixels = 0;\n        var toSpare = [];\n\n        var pixelSizes = sizesToTrim.map(function (size, i) {\n            // Convert requested percentages to pixel sizes\n            var pixelSize = (parentSize * size) / 100;\n            var elementGutterSize = getGutterSize(\n                gutterSize,\n                i === 0,\n                i === sizesToTrim.length - 1,\n                gutterAlign\n            );\n            var elementMinSize = minSizes[i] + elementGutterSize;\n\n            // If element is too smal, increase excess pixels by the difference\n            // and mark that it has no pixels to spare\n            if (pixelSize < elementMinSize) {\n                excessPixels += elementMinSize - pixelSize;\n                toSpare.push(0);\n                return elementMinSize\n            }\n\n            // Otherwise, mark the pixels it has to spare and return it's original size\n            toSpare.push(pixelSize - elementMinSize);\n            return pixelSize\n        });\n\n        // If nothing was adjusted, return the original sizes\n        if (excessPixels === 0) {\n            return sizesToTrim\n        }\n\n        return pixelSizes.map(function (pixelSize, i) {\n            var newPixelSize = pixelSize;\n\n            // While there's still pixels to take, and there's enough pixels to spare,\n            // take as many as possible up to the total excess pixels\n            if (excessPixels > 0 && toSpare[i] - excessPixels > 0) {\n                var takenPixels = Math.min(\n                    excessPixels,\n                    toSpare[i] - excessPixels\n                );\n\n                // Subtract the amount taken for the next iteration\n                excessPixels -= takenPixels;\n                newPixelSize = pixelSize - takenPixels;\n            }\n\n            // Return the pixel size adjusted as a percentage\n            return (newPixelSize / parentSize) * 100\n        })\n    }\n\n    // stopDragging is very similar to startDragging in reverse.\n    function stopDragging() {\n        var self = this;\n        var a = elements[self.a].element;\n        var b = elements[self.b].element;\n\n        if (self.dragging) {\n            getOption(options, 'onDragEnd', NOOP)(getSizes());\n        }\n\n        self.dragging = false;\n\n        // Remove the stored event listeners. This is why we store them.\n        global[removeEventListener]('mouseup', self.stop);\n        global[removeEventListener]('touchend', self.stop);\n        global[removeEventListener]('touchcancel', self.stop);\n        global[removeEventListener]('mousemove', self.move);\n        global[removeEventListener]('touchmove', self.move);\n\n        // Clear bound function references\n        self.stop = null;\n        self.move = null;\n\n        a[removeEventListener]('selectstart', NOOP);\n        a[removeEventListener]('dragstart', NOOP);\n        b[removeEventListener]('selectstart', NOOP);\n        b[removeEventListener]('dragstart', NOOP);\n\n        a.style.userSelect = '';\n        a.style.webkitUserSelect = '';\n        a.style.MozUserSelect = '';\n        a.style.pointerEvents = '';\n\n        b.style.userSelect = '';\n        b.style.webkitUserSelect = '';\n        b.style.MozUserSelect = '';\n        b.style.pointerEvents = '';\n\n        self.gutter.style.cursor = '';\n        self.parent.style.cursor = '';\n        document.body.style.cursor = '';\n    }\n\n    // startDragging calls `calculateSizes` to store the inital size in the pair object.\n    // It also adds event listeners for mouse/touch events,\n    // and prevents selection while dragging so avoid the selecting text.\n    function startDragging(e) {\n        // Right-clicking can't start dragging.\n        if ('button' in e && e.button !== 0) {\n            return\n        }\n\n        // Alias frequently used variables to save space. 200 bytes.\n        var self = this;\n        var a = elements[self.a].element;\n        var b = elements[self.b].element;\n\n        // Call the onDragStart callback.\n        if (!self.dragging) {\n            getOption(options, 'onDragStart', NOOP)(getSizes());\n        }\n\n        // Don't actually drag the element. We emulate that in the drag function.\n        e.preventDefault();\n\n        // Set the dragging property of the pair object.\n        self.dragging = true;\n\n        // Create two event listeners bound to the same pair object and store\n        // them in the pair object.\n        self.move = drag.bind(self);\n        self.stop = stopDragging.bind(self);\n\n        // All the binding. `window` gets the stop events in case we drag out of the elements.\n        global[addEventListener]('mouseup', self.stop);\n        global[addEventListener]('touchend', self.stop);\n        global[addEventListener]('touchcancel', self.stop);\n        global[addEventListener]('mousemove', self.move);\n        global[addEventListener]('touchmove', self.move);\n\n        // Disable selection. Disable!\n        a[addEventListener]('selectstart', NOOP);\n        a[addEventListener]('dragstart', NOOP);\n        b[addEventListener]('selectstart', NOOP);\n        b[addEventListener]('dragstart', NOOP);\n\n        a.style.userSelect = 'none';\n        a.style.webkitUserSelect = 'none';\n        a.style.MozUserSelect = 'none';\n        a.style.pointerEvents = 'none';\n\n        b.style.userSelect = 'none';\n        b.style.webkitUserSelect = 'none';\n        b.style.MozUserSelect = 'none';\n        b.style.pointerEvents = 'none';\n\n        // Set the cursor at multiple levels\n        self.gutter.style.cursor = cursor;\n        self.parent.style.cursor = cursor;\n        document.body.style.cursor = cursor;\n\n        // Cache the initial sizes of the pair.\n        calculateSizes.call(self);\n\n        // Determine the position of the mouse compared to the gutter\n        self.dragOffset = getMousePosition(e) - self.end;\n    }\n\n    // adjust sizes to ensure percentage is within min size and gutter.\n    sizes = trimToMin(sizes);\n\n    // 5. Create pair and element objects. Each pair has an index reference to\n    // elements `a` and `b` of the pair (first and second elements).\n    // Loop through the elements while pairing them off. Every pair gets a\n    // `pair` object and a gutter.\n    //\n    // Basic logic:\n    //\n    // - Starting with the second element `i > 0`, create `pair` objects with\n    //   `a = i - 1` and `b = i`\n    // - Set gutter sizes based on the _pair_ being first/last. The first and last\n    //   pair have gutterSize / 2, since they only have one half gutter, and not two.\n    // - Create gutter elements and add event listeners.\n    // - Set the size of the elements, minus the gutter sizes.\n    //\n    // -----------------------------------------------------------------------\n    // |     i=0     |         i=1         |        i=2       |      i=3     |\n    // |             |                     |                  |              |\n    // |           pair 0                pair 1             pair 2           |\n    // |             |                     |                  |              |\n    // -----------------------------------------------------------------------\n    var pairs = [];\n    elements = ids.map(function (id, i) {\n        // Create the element object.\n        var element = {\n            element: elementOrSelector(id),\n            size: sizes[i],\n            minSize: minSizes[i],\n            maxSize: maxSizes[i],\n            snapOffset: snapOffsets[i],\n            i: i,\n        };\n\n        var pair;\n\n        if (i > 0) {\n            // Create the pair object with its metadata.\n            pair = {\n                a: i - 1,\n                b: i,\n                dragging: false,\n                direction: direction,\n                parent: parent,\n            };\n\n            pair[aGutterSize] = getGutterSize(\n                gutterSize,\n                i - 1 === 0,\n                false,\n                gutterAlign\n            );\n            pair[bGutterSize] = getGutterSize(\n                gutterSize,\n                false,\n                i === ids.length - 1,\n                gutterAlign\n            );\n\n            // if the parent has a reverse flex-direction, switch the pair elements.\n            if (\n                parentFlexDirection === 'row-reverse' ||\n                parentFlexDirection === 'column-reverse'\n            ) {\n                var temp = pair.a;\n                pair.a = pair.b;\n                pair.b = temp;\n            }\n        }\n\n        // Determine the size of the current element. IE8 is supported by\n        // staticly assigning sizes without draggable gutters. Assigns a string\n        // to `size`.\n        //\n        // Create gutter elements for each pair.\n        if (i > 0) {\n            var gutterElement = gutter(i, direction, element.element);\n            setGutterSize(gutterElement, gutterSize, i);\n\n            // Save bound event listener for removal later\n            pair[gutterStartDragging] = startDragging.bind(pair);\n\n            // Attach bound event listener\n            gutterElement[addEventListener](\n                'mousedown',\n                pair[gutterStartDragging]\n            );\n            gutterElement[addEventListener](\n                'touchstart',\n                pair[gutterStartDragging]\n            );\n\n            parent.insertBefore(gutterElement, element.element);\n\n            pair.gutter = gutterElement;\n        }\n\n        setElementSize(\n            element.element,\n            element.size,\n            getGutterSize(\n                gutterSize,\n                i === 0,\n                i === ids.length - 1,\n                gutterAlign\n            ),\n            i\n        );\n\n        // After the first iteration, and we have a pair object, append it to the\n        // list of pairs.\n        if (i > 0) {\n            pairs.push(pair);\n        }\n\n        return element\n    });\n\n    function adjustToMin(element) {\n        var isLast = element.i === pairs.length;\n        var pair = isLast ? pairs[element.i - 1] : pairs[element.i];\n\n        calculateSizes.call(pair);\n\n        var size = isLast\n            ? pair.size - element.minSize - pair[bGutterSize]\n            : element.minSize + pair[aGutterSize];\n\n        adjust.call(pair, size);\n    }\n\n    elements.forEach(function (element) {\n        var computedSize = element.element[getBoundingClientRect]()[dimension];\n\n        if (computedSize < element.minSize) {\n            if (expandToMin) {\n                adjustToMin(element);\n            } else {\n                // eslint-disable-next-line no-param-reassign\n                element.minSize = computedSize;\n            }\n        }\n    });\n\n    function setSizes(newSizes) {\n        var trimmed = trimToMin(newSizes);\n        trimmed.forEach(function (newSize, i) {\n            if (i > 0) {\n                var pair = pairs[i - 1];\n\n                var a = elements[pair.a];\n                var b = elements[pair.b];\n\n                a.size = trimmed[i - 1];\n                b.size = newSize;\n\n                setElementSize(a.element, a.size, pair[aGutterSize], a.i);\n                setElementSize(b.element, b.size, pair[bGutterSize], b.i);\n            }\n        });\n    }\n\n    function destroy(preserveStyles, preserveGutter) {\n        pairs.forEach(function (pair) {\n            if (preserveGutter !== true) {\n                pair.parent.removeChild(pair.gutter);\n            } else {\n                pair.gutter[removeEventListener](\n                    'mousedown',\n                    pair[gutterStartDragging]\n                );\n                pair.gutter[removeEventListener](\n                    'touchstart',\n                    pair[gutterStartDragging]\n                );\n            }\n\n            if (preserveStyles !== true) {\n                var style = elementStyle(\n                    dimension,\n                    pair.a.size,\n                    pair[aGutterSize]\n                );\n\n                Object.keys(style).forEach(function (prop) {\n                    elements[pair.a].element.style[prop] = '';\n                    elements[pair.b].element.style[prop] = '';\n                });\n            }\n        });\n    }\n\n    return {\n        setSizes: setSizes,\n        getSizes: getSizes,\n        collapse: function collapse(i) {\n            adjustToMin(elements[i]);\n        },\n        destroy: destroy,\n        parent: parent,\n        pairs: pairs,\n    }\n};\n\nexport default Split;\n","import type { Component, Editor, CssRuleJSON } from \"grapesjs\";\nimport Split from \"split.js\";\nimport type { PluginOptions } from \"..\";\nimport type { Cash, CashStatic, Context, Selector } from \"cash-dom\";\n\ntype CodeEditorType = \"html\" | \"css\";\nexport class CodeEditor {\n  editor: Editor;\n  $: ((selector?: Selector, context?: Context | Cash) => Cash) & CashStatic;\n  pfx: string;\n  opts: PluginOptions;\n  canvas: Cash;\n  panelViews: Cash;\n  isShowing: boolean;\n  codePanel?: Cash;\n  component?: Component;\n  htmlCodeEditor: any; // CodeMirrorEditorViewer\n  cssCodeEditor: any; // CodeMirrorEditorViewer\n  previousHtmlCode?: string;\n  previousCssCode?: string;\n\n  constructor(editor: Editor, opts: PluginOptions) {\n    this.editor = editor;\n    this.$ = editor.$;\n    this.pfx = editor.getConfig(\"stylePrefix\");\n    this.opts = opts;\n    this.canvas = this.findWithinEditor(`.${this.pfx}cv-canvas`);\n    this.panelViews = opts.appendTo\n      ? this.$(opts.appendTo)\n      : this.findWithinEditor(`.${this.pfx}pn-${opts.panelId}`);\n    this.isShowing = true;\n  }\n\n  findPanel() {\n    const pn = this.editor.Panels;\n    const id = this.opts.panelId || \"\";\n    return pn.getPanel(id) || pn.addPanel({ id });\n  }\n\n  findWithinEditor(selector: string) {\n    return this.$(selector, this.editor.getEl());\n  }\n\n  buildCodeEditor(type: CodeEditorType) {\n    const { editor, opts } = this;\n\n    return editor.CodeManager.createViewer({\n      codeName: type === \"html\" ? \"htmlmixed\" : \"css\",\n      theme: \"hopscotch\",\n      readOnly: 0,\n      autoBeautify: 1,\n      autoCloseTags: 1,\n      autoCloseBrackets: 1,\n      styleActiveLine: 1,\n      smartIndent: 1,\n      ...opts.codeViewOptions,\n    });\n  }\n\n  buildSection(type: CodeEditorType, codeViewer: any) {\n    const { $, pfx, opts } = this;\n    const section = $(\"<section></section>\");\n    const btnText = type === \"html\" ? opts.htmlBtnText : opts.cssBtnText;\n    const cleanCssBtn =\n      opts.cleanCssBtn && type === \"css\"\n        ? `<button class=\"cp-delete-${type} ${pfx}btn-prim\">${opts.cleanCssBtnText}</button>`\n        : \"\";\n    section.append(\n      $(\n        `<div class=\"codepanel-separator\"><div class=\"codepanel-label\">${type}</div><div class=\"cp-btn-container\"> ${cleanCssBtn}<button class=\"cp-apply-${type} ${pfx}btn-prim\">${btnText}</button></div></div>`\n      )\n    );\n    const codeViewerEl = codeViewer.getElement();\n    codeViewerEl.style.height = \"calc(100% - 30px)\";\n    section.append(codeViewerEl);\n    this.codePanel?.append(section);\n    return section.get(0)!;\n  }\n\n  buildCodePanel() {\n    const { $, editor } = this;\n    const panel = this.opts.panelId ? this.findPanel() : null;\n    this.codePanel = $(\"<div></div>\");\n    this.codePanel?.addClass(\"code-panel\");\n\n    this.htmlCodeEditor = this.buildCodeEditor(\"html\");\n    this.cssCodeEditor = this.buildCodeEditor(\"css\");\n\n    const sections = [\n      this.buildSection(\"html\", this.htmlCodeEditor),\n      this.buildSection(\"css\", this.cssCodeEditor),\n    ];\n\n    panel &&\n      !this.opts.appendTo &&\n      panel\n        .set(\"appendContent\", this.codePanel?.get(0))\n        .trigger(\"change:appendContent\");\n    this.opts.appendTo && $(this.opts.appendTo).append(this.codePanel);\n    this.updateEditorContents();\n\n    this.codePanel\n      ?.find(\".cp-apply-html\")\n      .on(\"click\", this.updateHtml.bind(this));\n\n    this.codePanel\n      ?.find(\".cp-apply-css\")\n      .on(\"click\", this.updateCss.bind(this));\n\n    this.opts.cleanCssBtn &&\n      this.codePanel\n        ?.find(\".cp-delete-css\")\n        .on(\"click\", this.deleteSelectedCss.bind(this));\n\n    Split(sections, {\n      direction: \"vertical\",\n      sizes: [50, 50],\n      minSize: 100,\n      gutterSize: 1,\n      onDragEnd: this.refreshEditors.bind(this),\n    });\n\n    editor.on(\"component:update\", () => this.updateEditorContents());\n    editor.on(\"stop:preview\", () => {\n      if (this.isShowing && !this.opts.preserveWidth) {\n        this.canvas.css(\"width\", this.opts.openState?.canvas || \"65%\");\n      }\n    });\n  }\n\n  showCodePanel() {\n    this.isShowing = true;\n    this.updateEditorContents();\n    this.codePanel?.css(\"display\", \"block\");\n    // make sure editor is aware of width change after the 300ms effect ends\n    setTimeout(this.refreshEditors.bind(this), 320);\n\n    if (this.opts.preserveWidth) return;\n\n    this.panelViews.css(\"width\", this.opts.openState?.panel || \"35%\");\n    this.canvas.css(\"width\", this.opts.openState?.canvas || \"65%\");\n  }\n\n  hideCodePanel() {\n    if (this.codePanel) this.codePanel.css(\"display\", \"none\");\n    this.isShowing = false;\n\n    if (this.opts.preserveWidth) return;\n\n    this.panelViews.css(\"width\", this.opts.closedState?.panel || \"15%\");\n    this.canvas.css(\"width\", this.opts.closedState?.canvas || \"85%\");\n  }\n\n  refreshEditors() {\n    this.htmlCodeEditor.refresh();\n    this.cssCodeEditor.refresh();\n  }\n\n  updateHtml(e: Event) {\n    e?.preventDefault();\n    const { editor, component } = this;\n    let htmlCode = this.htmlCodeEditor.getContent().trim();\n    if (!htmlCode || htmlCode === this.previousHtmlCode) return;\n    this.previousHtmlCode = htmlCode;\n\n    let idStyles = \"\";\n    this.cssCodeEditor\n      .getContent()\n      .split(\"}\\n\")\n      .filter((el: string) => Boolean(el.trim()))\n      .map((cssObjectRule: string) => {\n        if (!/}$/.test(cssObjectRule)) {\n          //* Have to check closing bracket existence for every rule cause it can be missed after split and add it if it doesnt match\n          return `${cssObjectRule}}`;\n        }\n      })\n      .forEach((rule: string) => {\n        if (/^#/.test(rule)) idStyles += rule;\n      });\n\n    htmlCode += `<style>${idStyles}</style>`;\n\n    if (component?.attributes.type === \"wrapper\") {\n      editor.setComponents(htmlCode);\n    } else {\n      editor.select(component?.replaceWith(htmlCode));\n    }\n    return htmlCode;\n  }\n\n  updateCss(e: Event) {\n    e?.preventDefault();\n    const cssCode = this.cssCodeEditor.getContent().trim();\n    if (!cssCode || cssCode === this.previousCssCode) return;\n    this.previousCssCode = cssCode;\n    this.editor.Css.addRules(cssCode);\n    return cssCode;\n  }\n\n  deleteSelectedCss(e: Event) {\n    e?.preventDefault();\n    const selections = this.cssCodeEditor.editor.getSelections();\n    selections.forEach((selection: string) => this.parseRemove(selection));\n    this.cssCodeEditor.editor.deleteH();\n  }\n\n  parseRemove(removeCss: string) {\n    const rulesToRemove = this.getRules(this.editor.Parser.parseCss(removeCss));\n    rulesToRemove.forEach((rule) => {\n      if (rule) {\n        this.editor.Css.remove(rule);\n      }\n    });\n  }\n\n  getRules(rules: CssRuleJSON[]) {\n    const { editor } = this;\n    const sm = editor.Selectors;\n    return rules\n      .map((rule) => {\n        const selector = sm.get(rule.selectors as string[]);\n        const { state, selectorsAdd } = rule;\n        return editor.Css.get(selector, state, undefined, {\n          selectorsAdd,\n        });\n      })\n      .filter(Boolean);\n  }\n\n  updateEditorContents() {\n    if (!this.isShowing) return;\n\n    this.component = this.editor.getSelected();\n    if (this.component) {\n      this.htmlCodeEditor?.setContent(this.getComponentHtml(this.component));\n      this.cssCodeEditor?.setContent(\n        this.editor.CodeManager.getCode(this.component, \"css\", {\n          cssc: this.editor.Css,\n        })\n      );\n    }\n  }\n\n  getComponentHtml(component: Component) {\n    const { pfx, opts } = this;\n    let result = \"\";\n    const componentEl = component.getEl();\n\n    if (!opts.clearData) componentEl?.classList.remove(`${pfx}selected`);\n    const html = opts.clearData\n      ? component.toHTML()\n      : component.attributes.type === \"wrapper\"\n      ? componentEl?.innerHTML\n      : componentEl?.outerHTML;\n    if (!opts.clearData) componentEl?.classList.add(`${pfx}selected`);\n    result += html;\n\n    return result;\n  }\n}\n","export const openCodeStr = \"open-code\" as const;\nexport const getObject = \"code-editor-object\" as const;\nexport const getConstuctor = \"code-editor-constructor\" as const;\nexport const getCodeEditorStyles = (stylePrefix: string) => {\n    return `.code-panel {\n    text-align: left;\n    font-size: 1rem;\n    height: 100%;\n    overflow: hidden;\n}\n.code-panel section {\n    flex: 1;\n    height: 50%;\n}\n.code-panel section .codepanel-separator {\n    display: flex;\n    justify-content: space-between;\n    padding-left: 0.6rem;\n    padding-right: 0.6rem;\n}\n.code-panel section .codepanel-label {\n    margin-top: 5px;\n    line-height: 20px;\n    font-size: 13px;\n    color: #aaa;\n    user-select: none;\n    text-transform: uppercase;\n}\n.cp-btn-container {\n    display: flex;\n    justify-content: space-evenly;\n}\n.cp-btn-container .${stylePrefix}btn-prim {\n    margin: 2.5px;\n}\n.gutter {\n    cursor: ns-resize;\n    position: relative;\n    background-color: rgba(0, 0, 0, 0.2);\n}\n.gutter:after {\n    content: '';\n    display: block;\n    height: 8px;\n    width: 100%;\n    position: absolute;\n    top: -3px;\n    z-index: 150;\n}\n.code-panel .CodeMirror {\n    height: 100%;\n}\n.cp-delete-css {\n    margin-left: 70%;\n}\n.${stylePrefix}pn-views {\n    border-left: 1px solid rgba(0, 0, 0, 0.2);\n    border-bottom: 0;\n}\n.${stylePrefix}pn-views-container {\n    box-shadow: initial;\n    border-top: 2px solid rgba(0, 0, 0, 0.2);\n    top: 40px;\n    padding-top: 0;\n    height: calc(100% - 40px);\n}\n.${stylePrefix}pn-views-container, .${stylePrefix}cv-canvas {\n    transition: width 0.3s ease-in-out;\n} `\n}","import type { Plugin } from \"grapesjs\";\nimport { commands } from \"./commands\";\nimport { getCodeEditorStyles } from \"./consts\";\n\nexport type PluginOptions = {\n  /** Panel ID to append the code editor into */\n  panelId?: string;\n\n  /** Optional CSS selector or element to append the editor into, instead of the default panel */\n  appendTo?: string | HTMLElement;\n\n  /** State configuration when the editor is open (width percentages, etc.) */\n  openState?: {\n    /** Code viewer width percentage or size */\n    canvas: string;\n    /** Panel width percentage or size */\n    panel: string;\n  };\n\n  /** State configuration when the editor is closed */\n  closedState?: {\n    canvas: string;\n    panel: string;\n  };\n\n  /** Options passed to the internal code viewer (e.g. theme, readOnly, etc.) */\n  codeViewOptions?: Record<string, any>;\n\n  /** Prevent resizing between openState and closedState */\n  preserveWidth?: boolean;\n\n  /** Remove component data attributes (e.g. data-gjs-type) */\n  clearData?: boolean;\n\n  /** Whether to show a Clean CSS button in the selector manager */\n  cleanCssBtn?: boolean;\n\n  /** Label for the Apply HTML button */\n  htmlBtnText?: string;\n\n  /** Label for the Apply CSS button */\n  cssBtnText?: string;\n\n  /** Label for the Clean CSS button */\n  cleanCssBtnText?: string;\n};\n\nexport const plugin: Plugin = (editor, opts = {}) => {\n  const options: PluginOptions = {\n    panelId: \"views-container\",\n    appendTo: \"\",\n    codeViewOptions: {},\n    preserveWidth: false,\n    clearData: false,\n    cleanCssBtn: true,\n    htmlBtnText: \"Apply\",\n    cssBtnText: \"Apply\",\n    cleanCssBtnText: \"Delete\",\n    ...opts,\n  };\n\n  commands(editor, options);\n\n  editor.onReady(() => {\n    const styleElement = document.createElement(\"style\");\n    styleElement.textContent = getCodeEditorStyles(\n      editor.config.stylePrefix || \"\"\n    );\n    document.head.appendChild(styleElement);\n  });\n};\n\nexport default plugin;\n","import type { Plugin } from \"grapesjs\";\nimport { CodeEditor } from \"./code-editor\";\nimport { openCodeStr, getObject, getConstuctor } from \"./consts\";\nimport { PluginOptions } from \".\";\n\nexport const commands: Plugin<PluginOptions> = (editor, opts) => {\n  const cm = editor.Commands;\n  let codeEditor: InstanceType<typeof CodeEditor> | null = null;\n\n  cm.add(openCodeStr, {\n    run: (editor) => {\n      !codeEditor &&\n        (codeEditor = new CodeEditor(editor, opts)) &&\n        codeEditor.buildCodePanel();\n      codeEditor.showCodePanel();\n    },\n    stop: () => {\n      codeEditor && codeEditor.hideCodePanel();\n    },\n  });\n\n  cm.add(getObject, () => {\n    return codeEditor;\n  });\n\n  cm.add(getConstuctor, () => {\n    return CodeEditor;\n  });\n};\n"],"names":["root","factory","exports","module","define","amd","globalThis","window","this","__webpack_require__","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","Symbol","toStringTag","value","global","ssr","undefined","document","addEventListener","removeEventListener","getBoundingClientRect","gutterStartDragging","aGutterSize","bGutterSize","HORIZONTAL","NOOP","calc","filter","prefix","el","createElement","style","cssText","length","shift","isString","v","String","elementOrSelector","ele","querySelector","Error","getOption","options","propName","def","getGutterSize","gutterSize","isFirst","isLast","gutterAlign","defaultGutterFn","i","gutterDirection","gut","className","defaultElementStyleFn","dim","size","gutSize","defaultGutterStyleFn","idsOption","dimension","clientAxis","position","positionEnd","clientSize","elements","ids","Array","from","parent","parentNode","parentStyle","getComputedStyle","parentFlexDirection","flexDirection","sizes","map","minSize","minSizes","isArray","maxSize","Infinity","maxSizes","expandToMin","snapOffset","snapOffsets","dragInterval","direction","cursor","gutter","elementStyle","gutterStyle","setElementSize","keys","forEach","getSizes","element","getMousePosition","e","touches","adjust","offset","a","b","percentage","drag","dragging","start","dragOffset","Math","round","calculateSizes","aBounds","bBounds","end","trimToMin","sizesToTrim","parentSize","computedStyle","parseFloat","paddingLeft","paddingRight","paddingTop","paddingBottom","innerSize","reduce","excessPixels","toSpare","pixelSizes","pixelSize","elementGutterSize","elementMinSize","push","newPixelSize","takenPixels","min","stopDragging","self","stop","move","userSelect","webkitUserSelect","MozUserSelect","pointerEvents","body","startDragging","button","preventDefault","bind","pairs","adjustToMin","pair","id","temp","gutterElement","setGutterSize","insertBefore","computedSize","setSizes","newSizes","trimmed","newSize","collapse","destroy","preserveStyles","preserveGutter","removeChild","editor","opts","$","pfx","getConfig","canvas","findWithinEditor","panelViews","appendTo","panelId","isShowing","findPanel","pn","Panels","getPanel","addPanel","selector","getEl","buildCodeEditor","type","CodeManager","createViewer","codeName","theme","readOnly","autoBeautify","autoCloseTags","autoCloseBrackets","styleActiveLine","smartIndent","codeViewOptions","buildSection","codeViewer","section","btnText","htmlBtnText","cssBtnText","cleanCssBtn","cleanCssBtnText","append","codeViewerEl","getElement","height","codePanel","buildCodePanel","panel","addClass","htmlCodeEditor","cssCodeEditor","sections","set","trigger","updateEditorContents","find","on","updateHtml","updateCss","deleteSelectedCss","onDragEnd","refreshEditors","preserveWidth","css","openState","showCodePanel","setTimeout","hideCodePanel","closedState","refresh","component","htmlCode","getContent","trim","previousHtmlCode","idStyles","split","Boolean","cssObjectRule","test","rule","attributes","setComponents","select","replaceWith","cssCode","previousCssCode","Css","addRules","getSelections","selection","parseRemove","deleteH","removeCss","getRules","Parser","parseCss","remove","rules","sm","Selectors","selectors","state","selectorsAdd","getSelected","setContent","getComponentHtml","getCode","cssc","result","componentEl","clearData","classList","html","toHTML","innerHTML","outerHTML","add","openCodeStr","getObject","getConstuctor","cm","Commands","codeEditor","run","CodeEditor","commands","onReady","stylePrefix","styleElement","textContent","config","head","appendChild"],"sourceRoot":""}